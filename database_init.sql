
-- 樹莓派人臉辨識廣告系統資料庫初始化
-- database_init.sql

USE face_ad_system;

-- 會員資料表
CREATE TABLE IF NOT EXISTS members (
    member_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20),
    gender ENUM('M', 'F'),
    age_group VARCHAR(20),
    registration_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    face_encoding TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    INDEX idx_name (name),
    INDEX idx_active (is_active)
);

-- 消費記錄表
CREATE TABLE IF NOT EXISTS purchase_history (
    purchase_id INT PRIMARY KEY AUTO_INCREMENT,
    member_id INT,
    product_category VARCHAR(50),
    product_name VARCHAR(200),
    quantity INT DEFAULT 1,
    unit_price DECIMAL(10,2),
    amount DECIMAL(10,2),
    total_amount DECIMAL(12,2),
    purchase_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    store_location VARCHAR(100),
    FOREIGN KEY (member_id) REFERENCES members(member_id) ON DELETE CASCADE,
    INDEX idx_member_date (member_id, purchase_date),
    INDEX idx_category (product_category)
);

-- 廣告內容表
CREATE TABLE IF NOT EXISTS advertisements (
    ad_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    image_path VARCHAR(500),
    video_path VARCHAR(500),
    target_category VARCHAR(50),
    target_gender ENUM('M', 'F', 'ALL') DEFAULT 'ALL',
    target_age_group VARCHAR(20),
    priority INT DEFAULT 1,
    is_active BOOLEAN DEFAULT TRUE,
    start_date DATE,
    end_date DATE,
    created_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_target (target_category, target_gender, target_age_group),
    INDEX idx_active_date (is_active, start_date, end_date)
);

-- 廣告推播記錄表
CREATE TABLE IF NOT EXISTS ad_display_log (
    log_id INT PRIMARY KEY AUTO_INCREMENT,
    member_id INT,
    ad_id INT,
    display_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    display_location VARCHAR(100) DEFAULT 'main_screen',
    display_duration INT DEFAULT 10,  -- 顯示秒數
    FOREIGN KEY (member_id) REFERENCES members(member_id) ON DELETE CASCADE,
    FOREIGN KEY (ad_id) REFERENCES advertisements(ad_id) ON DELETE CASCADE,
    INDEX idx_member_time (member_id, display_time),
    INDEX idx_ad_time (ad_id, display_time)
);

-- 系統設定表
CREATE TABLE IF NOT EXISTS system_settings (
    setting_id INT PRIMARY KEY AUTO_INCREMENT,
    setting_key VARCHAR(100) UNIQUE NOT NULL,
    setting_value TEXT,
    description VARCHAR(500),
    updated_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 插入預設廣告資料
INSERT INTO advertisements (title, content, target_category, target_gender, target_age_group, is_active) VALUES
('新品上市 - 智慧手錶', '最新智慧手錶現正優惠中！', 'electronics', 'ALL', '20-40', TRUE),
('時尚服飾特價', '春季新款服飾全面8折', 'fashion', 'F', '18-35', TRUE),
('運動用品促銷', '運動鞋、運動服飾大特價', 'sports', 'M', '20-45', TRUE),
('美妝保養品', '頂級保養品牌限時優惠', 'beauty', 'F', '25-50', TRUE),
('家電優惠', '生活家電年終大促銷', 'appliances', 'ALL', '30-60', TRUE);

-- 插入系統設定
INSERT INTO system_settings (setting_key, setting_value, description) VALUES
('face_recognition_tolerance', '0.6', '人臉辨識容忍度'),
('ad_display_duration', '10', '廣告顯示時間（秒）'),
('camera_resolution_width', '640', '攝影機解析度寬度'),
('camera_resolution_height', '480', '攝影機解析度高度'),
('unknown_face_threshold', '5', '未知人臉觸發通用廣告的閾值');

-- 插入預設會員資料
INSERT INTO members (member_id, name, email, phone, gender, age_group, face_encoding) VALUES
(1, 'Alex Chen', 'alex.chen@example.com', '0911-111-111', 'M', '30-39', 'encoded_face_id_1'),
(2, 'Bella Lin', 'bella.lin@example.com', '0922-222-222', 'F', '30-39', 'encoded_face_id_2'),
(3, 'Charlie Wang', 'charlie.wang@example.com', '0933-333-333', 'M', '20-29', 'encoded_face_id_3');

-- 插入預設消費紀錄
-- Member 1 purchase records
INSERT INTO purchase_history (member_id, product_category, product_name, quantity, unit_price, amount, total_amount, purchase_date, store_location) VALUES
(1, 'health_food', 'High Fiber Cereal Box', 1, 763.82, 763.82, 802.01, '2024-01-02 09:03:31', 'Online Shop'),
(1, 'sports_nutrition', 'Pre-Workout Energy Gel Pack', 2, 1700.39, 3400.78, 3570.82, '2024-01-07 05:41:15', 'Online Shop'),
(1, 'health_food', 'Plant Protein Crisps', 1, 721.30, 721.30, 757.37, '2024-01-08 04:24:15', 'Taipei Flagship'),
(1, 'health_food', 'Daily Omega Capsules', 3, 779.69, 2339.07, 2456.02, '2024-01-08 06:25:03', 'Taipei Flagship'),
(1, 'sportswear', 'Compression Training Tee', 2, 967.91, 1935.82, 2032.61, '2024-01-08 09:02:39', 'Taichung Branch'),
(1, 'beverages', 'Kombucha Variety Box', 3, 120.25, 360.75, 378.79, '2024-01-11 04:30:20', 'Taichung Branch'),
(1, 'fitness_equipment', 'Adjustable Kettlebell 16kg', 1, 1116.47, 1116.47, 1172.29, '2024-01-13 01:44:54', 'Kaohsiung Store'),
(1, 'fresh_produce', 'Sweet Mango Gift Pack', 3, 159.25, 477.75, 501.64, '2024-01-13 07:16:47', 'Kaohsiung Store'),
(1, 'electronics', 'Wireless Sport Earbuds', 2, 3068.93, 6137.86, 6444.75, '2024-01-18 14:43:42', 'Kaohsiung Store'),
(1, 'sportswear', 'Running Shorts Pack', 3, 468.80, 1406.40, 1476.72, '2024-01-20 11:03:12', 'Taipei Flagship'),
(1, 'sports_nutrition', 'Pre-Workout Energy Gel Pack', 1, 1452.39, 1452.39, 1525.01, '2024-01-21 21:33:32', 'Taipei Flagship'),
(1, 'sports_nutrition', 'Vegan Protein Shake Mix', 3, 1714.38, 5143.14, 5400.30, '2024-01-22 04:48:58', 'Taichung Branch'),
(1, 'beverages', 'Coconut Water Hydration Pack', 2, 294.83, 589.66, 619.14, '2024-01-22 08:22:43', 'Online Shop'),
(1, 'sportswear', 'Breathable Gym Socks 5pk', 2, 413.94, 827.88, 869.27, '2024-01-23 23:27:16', 'Taipei Flagship'),
(1, 'sports_nutrition', 'Vegan Protein Shake Mix', 3, 1337.93, 4013.79, 4214.48, '2024-01-28 20:36:20', 'Taipei Flagship'),
(1, 'beverages', 'Green Detox Juice', 1, 141.41, 141.41, 148.48, '2024-02-01 06:55:39', 'Taipei Flagship'),
(1, 'health_food', 'Organic Kale Smoothie Pack', 1, 433.65, 433.65, 455.33, '2024-02-01 15:34:27', 'Online Shop'),
(1, 'sports_nutrition', 'BCAA Recovery Powder', 1, 2132.04, 2132.04, 2238.64, '2024-02-01 18:39:17', 'Taichung Branch'),
(1, 'fresh_produce', 'Organic Spinach Bundle', 2, 207.50, 415.00, 435.75, '2024-02-02 09:10:02', 'Taipei Flagship'),
(1, 'sports_nutrition', 'BCAA Recovery Powder', 2, 359.01, 718.02, 753.92, '2024-02-05 08:20:04', 'Taichung Branch'),
(1, 'sports_nutrition', 'BCAA Recovery Powder', 1, 1975.55, 1975.55, 2074.33, '2024-02-06 19:23:13', 'Taichung Branch'),
(1, 'snacks', 'Dark Chocolate Energy Bites', 2, 136.72, 273.44, 287.11, '2024-02-06 23:37:31', 'Taipei Flagship'),
(1, 'beverages', 'Protein Oat Smoothie', 2, 415.25, 830.50, 872.03, '2024-02-08 17:04:42', 'Taichung Branch'),
(1, 'fitness_equipment', 'Compact Balance Board', 2, 2841.22, 5682.44, 5966.56, '2024-02-10 07:04:57', 'Online Shop'),
(1, 'outdoor', 'Trail Running Backpack', 2, 1484.94, 2969.88, 3118.37, '2024-02-11 17:33:38', 'Kaohsiung Store'),
(1, 'beverages', 'Cold Brew Coffee Bottle', 2, 409.89, 819.78, 860.77, '2024-02-13 10:01:39', 'Taichung Branch'),
(1, 'personal_care', 'Cooling Muscle Relief Gel', 1, 467.16, 467.16, 490.52, '2024-02-15 04:26:56', 'Taipei Flagship'),
(1, 'sportswear', 'Breathable Gym Socks 5pk', 2, 509.25, 1018.50, 1069.43, '2024-02-15 07:27:19', 'Taichung Branch'),
(1, 'snacks', 'Yogurt Granola Bites', 2, 227.03, 454.06, 476.76, '2024-02-17 15:22:34', 'Taipei Flagship'),
(1, 'beverages', 'Green Detox Juice', 3, 168.40, 505.20, 530.46, '2024-02-18 05:15:51', 'Kaohsiung Store'),
(1, 'fresh_produce', 'Seasonal Berry Combo', 1, 168.62, 168.62, 177.05, '2024-02-19 12:00:08', 'Taipei Flagship'),
(1, 'grocery', 'Brown Rice Family Pack', 2, 342.91, 685.82, 720.11, '2024-02-24 10:57:18', 'Kaohsiung Store'),
(1, 'health_food', 'Herbal Detox Tea Set', 1, 705.80, 705.80, 741.09, '2024-02-26 04:43:16', 'Taipei Flagship'),
(1, 'sports_nutrition', 'Vegan Protein Shake Mix', 2, 1797.76, 3595.52, 3775.30, '2024-02-27 12:34:00', 'Taipei Flagship'),
(1, 'health_food', 'Organic Kale Smoothie Pack', 1, 843.97, 843.97, 886.17, '2024-03-02 04:02:59', 'Online Shop'),
(1, 'health_food', 'Herbal Detox Tea Set', 1, 210.86, 210.86, 221.40, '2024-03-02 05:51:31', 'Online Shop'),
(1, 'sports_nutrition', 'BCAA Recovery Powder', 3, 1562.56, 4687.68, 4922.06, '2024-03-05 00:03:25', 'Online Shop'),
(1, 'fitness_equipment', 'Resistance Band Pro Set', 1, 657.51, 657.51, 690.39, '2024-03-05 03:52:13', 'Taipei Flagship'),
(1, 'fitness_equipment', 'Foam Roller Kit', 1, 512.01, 512.01, 537.61, '2024-03-09 04:34:50', 'Kaohsiung Store'),
(1, 'fitness_equipment', 'Resistance Band Pro Set', 2, 1635.49, 3270.98, 3434.53, '2024-03-12 00:17:21', 'Taipei Flagship'),
(1, 'sportswear', 'Breathable Gym Socks 5pk', 2, 1035.16, 2070.32, 2173.84, '2024-03-14 04:46:38', 'Online Shop'),
(1, 'health_food', 'Plant Protein Crisps', 1, 374.76, 374.76, 393.50, '2024-03-14 09:25:06', 'Kaohsiung Store'),
(1, 'electronics', 'Heart Rate Chest Strap', 1, 3373.09, 3373.09, 3541.74, '2024-03-17 18:35:13', 'Taichung Branch'),
(1, 'fresh_produce', 'Seasonal Berry Combo', 1, 261.43, 261.43, 274.50, '2024-03-19 06:48:54', 'Kaohsiung Store'),
(1, 'grocery', 'Organic Almond Butter Jar', 3, 377.18, 1131.54, 1188.12, '2024-03-19 23:31:17', 'Taichung Branch'),
(1, 'sports_nutrition', 'BCAA Recovery Powder', 2, 1289.88, 2579.76, 2708.75, '2024-03-22 13:09:35', 'Taichung Branch'),
(1, 'sports_nutrition', 'Whey Protein Tub 2kg', 2, 632.86, 1265.72, 1329.01, '2024-03-27 14:51:57', 'Online Shop'),
(1, 'sports_nutrition', 'Vegan Protein Shake Mix', 2, 1314.83, 2629.66, 2761.14, '2024-03-28 04:35:47', 'Online Shop'),
(1, 'fitness_equipment', 'Resistance Band Pro Set', 1, 992.21, 992.21, 1041.82, '2024-03-31 14:09:20', 'Taipei Flagship'),
(1, 'fitness_equipment', 'Compact Balance Board', 1, 2120.13, 2120.13, 2226.14, '2024-04-01 22:00:43', 'Taichung Branch'),
(1, 'fresh_produce', 'Farm Fresh Avocado Pair', 3, 197.51, 592.53, 622.16, '2024-04-04 20:18:30', 'Online Shop'),
(1, 'sports_nutrition', 'Pre-Workout Energy Gel Pack', 3, 1784.27, 5352.81, 5620.45, '2024-04-08 17:06:21', 'Kaohsiung Store'),
(1, 'fitness_equipment', 'Compact Balance Board', 1, 2006.03, 2006.03, 2106.33, '2024-04-10 01:31:42', 'Online Shop'),
(1, 'health_food', 'Organic Kale Smoothie Pack', 2, 743.57, 1487.14, 1561.50, '2024-04-10 06:39:13', 'Taipei Flagship'),
(1, 'sports_nutrition', 'Whey Protein Tub 2kg', 2, 1023.29, 2046.58, 2148.91, '2024-04-10 15:42:32', 'Taipei Flagship'),
(1, 'outdoor', 'Insulated Water Bottle', 2, 263.77, 527.54, 553.92, '2024-04-11 10:25:44', 'Taichung Branch'),
(1, 'sports_nutrition', 'Whey Protein Tub 2kg', 2, 867.62, 1735.24, 1822.00, '2024-04-11 11:57:12', 'Kaohsiung Store'),
(1, 'beverages', 'Protein Oat Smoothie', 2, 205.37, 410.74, 431.28, '2024-04-15 21:28:37', 'Kaohsiung Store'),
(1, 'beverages', 'Green Detox Juice', 2, 193.54, 387.08, 406.43, '2024-04-16 04:30:37', 'Taipei Flagship'),
(1, 'sportswear', 'Moisture Wicking Headband Set', 2, 1083.40, 2166.80, 2275.14, '2024-04-21 01:37:47', 'Taipei Flagship'),
(1, 'fresh_produce', 'Farm Fresh Avocado Pair', 1, 240.61, 240.61, 252.64, '2024-04-22 03:38:52', 'Kaohsiung Store'),
(1, 'sportswear', 'Performance Training Jacket', 2, 1133.69, 2267.38, 2380.75, '2024-04-26 05:46:41', 'Taipei Flagship'),
(1, 'snacks', 'Dark Chocolate Energy Bites', 2, 253.34, 506.68, 532.01, '2024-05-02 18:17:25', 'Online Shop'),
(1, 'sports_nutrition', 'BCAA Recovery Powder', 1, 1258.59, 1258.59, 1321.52, '2024-05-03 21:42:16', 'Online Shop'),
(1, 'sports_nutrition', 'Pre-Workout Energy Gel Pack', 2, 1449.78, 2899.56, 3044.54, '2024-05-04 17:37:49', 'Kaohsiung Store'),
(1, 'outdoor', 'LED Safety Armband', 1, 1662.53, 1662.53, 1745.66, '2024-05-06 03:33:56', 'Taichung Branch'),
(1, 'health_food', 'High Fiber Cereal Box', 2, 675.01, 1350.02, 1417.52, '2024-05-08 18:25:18', 'Online Shop'),
(1, 'health_food', 'High Fiber Cereal Box', 3, 541.54, 1624.62, 1705.85, '2024-05-10 15:48:39', 'Online Shop'),
(1, 'beverages', 'Kombucha Variety Box', 3, 386.30, 1158.90, 1216.85, '2024-05-14 11:03:37', 'Online Shop'),
(1, 'health_food', 'Plant Protein Crisps', 2, 765.11, 1530.22, 1606.73, '2024-05-15 14:44:50', 'Online Shop'),
(1, 'outdoor', 'Trail Running Backpack', 2, 959.01, 1918.02, 2013.92, '2024-05-16 21:39:30', 'Taichung Branch'),
(1, 'outdoor', 'LED Safety Armband', 1, 264.95, 264.95, 278.20, '2024-05-17 02:25:01', 'Kaohsiung Store'),
(1, 'sports_nutrition', 'Pre-Workout Energy Gel Pack', 2, 1382.68, 2765.36, 2903.63, '2024-05-20 14:18:49', 'Kaohsiung Store'),
(1, 'sports_nutrition', 'Electrolyte Hydration Tablets', 2, 1239.16, 2478.32, 2602.24, '2024-05-21 15:45:26', 'Taipei Flagship'),
(1, 'fitness_equipment', 'Compact Balance Board', 2, 2331.23, 4662.46, 4895.58, '2024-05-23 04:42:47', 'Taichung Branch'),
(1, 'health_food', 'Herbal Detox Tea Set', 2, 690.76, 1381.52, 1450.60, '2024-05-24 14:43:31', 'Taipei Flagship'),
(1, 'outdoor', 'Insulated Water Bottle', 1, 1171.44, 1171.44, 1230.01, '2024-05-25 02:52:02', 'Taichung Branch'),
(1, 'beverages', 'Protein Oat Smoothie', 2, 249.94, 499.88, 524.87, '2024-05-27 01:26:48', 'Taipei Flagship'),
(1, 'personal_care', 'Cooling Muscle Relief Gel', 2, 268.15, 536.30, 563.12, '2024-05-30 08:14:22', 'Taichung Branch'),
(1, 'electronics', 'Heart Rate Chest Strap', 2, 1625.99, 3251.98, 3414.58, '2024-05-30 13:56:56', 'Online Shop'),
(1, 'fitness_equipment', 'Resistance Band Pro Set', 2, 3071.09, 6142.18, 6449.29, '2024-05-31 00:44:56', 'Online Shop'),
(1, 'sports_nutrition', 'Vegan Protein Shake Mix', 2, 1924.01, 3848.02, 4040.42, '2024-06-01 05:43:05', 'Kaohsiung Store'),
(1, 'grocery', 'Premium Olive Oil 500ml', 1, 537.50, 537.50, 564.38, '2024-06-02 13:22:10', 'Online Shop'),
(1, 'health_food', 'Organic Kale Smoothie Pack', 2, 385.35, 770.70, 809.24, '2024-06-02 16:19:26', 'Taipei Flagship'),
(1, 'beverages', 'Protein Oat Smoothie', 3, 194.32, 582.96, 612.11, '2024-06-03 13:40:01', 'Online Shop'),
(1, 'health_food', 'Organic Kale Smoothie Pack', 2, 747.95, 1495.90, 1570.70, '2024-06-05 23:05:16', 'Taichung Branch'),
(1, 'sports_nutrition', 'Vegan Protein Shake Mix', 3, 543.84, 1631.52, 1713.10, '2024-06-06 00:46:16', 'Taipei Flagship'),
(1, 'fitness_equipment', 'Resistance Band Pro Set', 1, 2634.02, 2634.02, 2765.72, '2024-06-06 09:11:02', 'Kaohsiung Store'),
(1, 'electronics', 'Fitness Tracker Wristband', 1, 3000.60, 3000.60, 3150.63, '2024-06-06 16:38:28', 'Taipei Flagship'),
(1, 'beverages', 'Green Detox Juice', 2, 158.59, 317.18, 333.04, '2024-06-07 09:01:36', 'Taipei Flagship'),
(1, 'sports_nutrition', 'Electrolyte Hydration Tablets', 1, 1889.22, 1889.22, 1983.68, '2024-06-09 02:13:35', 'Kaohsiung Store'),
(1, 'sports_nutrition', 'BCAA Recovery Powder', 1, 1919.43, 1919.43, 2015.40, '2024-06-12 18:03:03', 'Kaohsiung Store'),
(1, 'fitness_equipment', 'Compact Balance Board', 1, 928.81, 928.81, 975.25, '2024-06-13 20:41:02', 'Online Shop'),
(1, 'health_food', 'Herbal Detox Tea Set', 3, 618.06, 1854.18, 1946.89, '2024-06-20 03:44:28', 'Online Shop'),
(1, 'fresh_produce', 'Organic Spinach Bundle', 3, 301.51, 904.53, 949.76, '2024-06-20 22:37:08', 'Taichung Branch'),
(1, 'health_food', 'High Fiber Cereal Box', 1, 255.51, 255.51, 268.29, '2024-06-24 05:19:59', 'Online Shop'),
(1, 'sportswear', 'Performance Training Jacket', 2, 1364.21, 2728.42, 2864.84, '2024-06-27 11:53:34', 'Taichung Branch'),
(1, 'fresh_produce', 'Sweet Mango Gift Pack', 2, 258.66, 517.32, 543.19, '2024-06-27 14:25:26', 'Kaohsiung Store'),
(1, 'outdoor', 'Trail Running Backpack', 2, 362.30, 724.60, 760.83, '2024-06-27 18:37:36', 'Taipei Flagship'),
(1, 'sports_nutrition', 'Pre-Workout Energy Gel Pack', 1, 1978.52, 1978.52, 2077.45, '2024-06-29 14:05:57', 'Taichung Branch');

-- Member 2 purchase records
INSERT INTO purchase_history (member_id, product_category, product_name, quantity, unit_price, amount, total_amount, purchase_date, store_location) VALUES
(2, 'baby_food', 'Veggie Teething Puff Sticks', 3, 326.72, 980.16, 1029.17, '2024-01-07 22:22:28', 'Online Shop'),
(2, 'books', 'Storytime Board Book Set', 1, 327.13, 327.13, 343.49, '2024-01-11 13:58:17', 'Online Shop'),
(2, 'family_grocery', 'Bulk Oatmeal Canister', 2, 231.87, 463.74, 486.93, '2024-01-13 09:50:23', 'Taipei Flagship'),
(2, 'kitchen', 'Nonstick Fry Pan 28cm', 1, 1129.06, 1129.06, 1185.51, '2024-01-13 23:21:30', 'Kaohsiung Store'),
(2, 'desserts', 'Mini Cheesecake Sampler', 2, 342.35, 684.70, 718.94, '2024-01-16 15:32:56', 'Taipei Flagship'),
(2, 'baby_care', 'Baby Nail Care Set', 1, 387.70, 387.70, 407.09, '2024-01-20 13:31:44', 'Kaohsiung Store'),
(2, 'baby_care', 'Sensitive Baby Wipes Mega Pack', 3, 419.38, 1258.14, 1321.05, '2024-01-22 05:54:26', 'Taipei Flagship'),
(2, 'baby_care', 'Infant Bath Essentials Kit', 3, 613.75, 1841.25, 1933.31, '2024-01-22 19:12:48', 'Online Shop'),
(2, 'home_care', 'Family Safe Floor Cleaner', 2, 368.81, 737.62, 774.50, '2024-02-01 21:28:01', 'Taipei Flagship'),
(2, 'desserts', 'Molten Chocolate Cake Duo', 1, 413.73, 413.73, 434.42, '2024-02-03 12:26:06', 'Kaohsiung Store'),
(2, 'family_grocery', 'Large Pack Breakfast Cereal', 2, 323.11, 646.22, 678.53, '2024-02-05 05:44:23', 'Taipei Flagship'),
(2, 'baby_food', 'Organic Rice Cereal Box', 3, 263.69, 791.07, 830.62, '2024-02-12 17:55:03', 'Taipei Flagship'),
(2, 'kitchen', 'Electric Soup Maker', 1, 1797.21, 1797.21, 1887.07, '2024-02-13 12:23:37', 'Taichung Branch'),
(2, 'diapers', 'Pull-Up Training Pants', 2, 949.74, 1899.48, 1994.45, '2024-02-14 02:29:48', 'Taipei Flagship'),
(2, 'baby_care', 'Soothing Baby Lotion', 1, 545.34, 545.34, 572.61, '2024-02-14 13:10:20', 'Kaohsiung Store'),
(2, 'books', 'Baby Sleep Tips Handbook', 1, 328.91, 328.91, 345.36, '2024-02-17 05:34:29', 'Online Shop'),
(2, 'baby_care', 'Baby Nail Care Set', 2, 416.92, 833.84, 875.53, '2024-02-17 19:44:54', 'Online Shop'),
(2, 'home_care', 'Antibacterial Surface Cleaner', 3, 301.88, 905.64, 950.92, '2024-02-20 23:56:53', 'Taichung Branch'),
(2, 'baby_care', 'Baby Nail Care Set', 1, 548.02, 548.02, 575.42, '2024-02-25 23:08:55', 'Taichung Branch'),
(2, 'baby_care', 'Gentle Baby Shampoo', 1, 268.54, 268.54, 281.97, '2024-02-28 05:41:13', 'Online Shop'),
(2, 'toys', 'Stacking Learning Blocks', 2, 747.77, 1495.54, 1570.32, '2024-03-01 00:53:48', 'Taichung Branch'),
(2, 'kitchen', 'Electric Soup Maker', 2, 684.83, 1369.66, 1438.14, '2024-03-01 20:17:26', 'Kaohsiung Store'),
(2, 'toys', 'Interactive Music Playmat', 1, 421.93, 421.93, 443.03, '2024-03-02 00:01:11', 'Kaohsiung Store'),
(2, 'baby_food', 'Stage 2 Dinner Jar', 2, 266.54, 533.08, 559.73, '2024-03-04 19:21:13', 'Taipei Flagship'),
(2, 'baby_care', 'Baby Nail Care Set', 3, 299.66, 898.98, 943.93, '2024-03-08 17:06:59', 'Kaohsiung Store'),
(2, 'baby_food', 'Fruit Puree Variety Pack', 2, 161.14, 322.28, 338.39, '2024-03-09 01:37:46', 'Kaohsiung Store'),
(2, 'baby_care', 'Baby Nail Care Set', 3, 254.92, 764.76, 803.00, '2024-03-09 17:52:44', 'Kaohsiung Store'),
(2, 'baby_food', 'Toddler Nutritional Biscuits', 3, 190.88, 572.64, 601.27, '2024-03-12 10:54:48', 'Taipei Flagship'),
(2, 'baby_care', 'Gentle Baby Shampoo', 1, 356.44, 356.44, 374.26, '2024-03-15 07:31:47', 'Kaohsiung Store'),
(2, 'baby_food', 'Toddler Nutritional Biscuits', 2, 242.66, 485.32, 509.59, '2024-03-15 12:12:57', 'Taichung Branch'),
(2, 'family_grocery', 'Healthy Cooking Oil 2L', 3, 284.18, 852.54, 895.17, '2024-03-16 07:30:45', 'Taichung Branch'),
(2, 'books', 'Storytime Board Book Set', 1, 421.49, 421.49, 442.56, '2024-03-16 09:29:49', 'Taichung Branch'),
(2, 'books', 'Baby Sleep Tips Handbook', 1, 493.93, 493.93, 518.63, '2024-03-16 21:44:21', 'Taichung Branch'),
(2, 'diapers', 'Eco Bamboo Diaper Bundle', 3, 696.87, 2090.61, 2195.14, '2024-03-16 21:53:42', 'Taichung Branch'),
(2, 'baby_food', 'Organic Rice Cereal Box', 3, 207.86, 623.58, 654.76, '2024-03-18 04:40:37', 'Taipei Flagship'),
(2, 'baby_food', 'Veggie Teething Puff Sticks', 2, 272.43, 544.86, 572.10, '2024-03-21 05:33:53', 'Kaohsiung Store'),
(2, 'desserts', 'Seasonal Fruit Tart', 2, 318.98, 637.96, 669.86, '2024-03-21 20:02:26', 'Taichung Branch'),
(2, 'baby_care', 'Baby Nail Care Set', 3, 590.41, 1771.23, 1859.79, '2024-03-23 23:59:37', 'Online Shop'),
(2, 'baby_food', 'Fruit Puree Variety Pack', 4, 271.84, 1087.36, 1141.73, '2024-03-25 21:28:18', 'Online Shop'),
(2, 'diapers', 'Eco Bamboo Diaper Bundle', 1, 679.14, 679.14, 713.10, '2024-03-26 12:02:10', 'Kaohsiung Store'),
(2, 'baby_care', 'Gentle Baby Shampoo', 2, 315.83, 631.66, 663.24, '2024-03-27 04:13:34', 'Online Shop'),
(2, 'family_grocery', 'Healthy Cooking Oil 2L', 3, 169.37, 508.11, 533.52, '2024-03-27 23:08:59', 'Taipei Flagship'),
(2, 'family_grocery', 'Bulk Oatmeal Canister', 3, 359.22, 1077.66, 1131.54, '2024-03-29 13:07:19', 'Taichung Branch'),
(2, 'baby_food', 'Stage 2 Dinner Jar', 3, 205.96, 617.88, 648.77, '2024-04-03 07:10:47', 'Taichung Branch'),
(2, 'toys', 'Soft Plush Storybook Set', 2, 878.41, 1756.82, 1844.66, '2024-04-03 21:51:41', 'Taipei Flagship'),
(2, 'kitchen', 'Electric Soup Maker', 2, 1795.41, 3590.82, 3770.36, '2024-04-04 00:08:02', 'Taipei Flagship'),
(2, 'baby_food', 'Organic Rice Cereal Box', 2, 234.73, 469.46, 492.93, '2024-04-05 10:21:23', 'Online Shop'),
(2, 'baby_care', 'Soothing Baby Lotion', 2, 261.00, 522.00, 548.10, '2024-04-05 13:02:33', 'Taipei Flagship'),
(2, 'baby_care', 'Sensitive Baby Wipes Mega Pack', 2, 554.06, 1108.12, 1163.53, '2024-04-06 04:30:21', 'Taichung Branch'),
(2, 'baby_care', 'Baby Nail Care Set', 2, 395.12, 790.24, 829.75, '2024-04-06 21:40:44', 'Taichung Branch'),
(2, 'toys', 'Stacking Learning Blocks', 2, 456.26, 912.52, 958.15, '2024-04-07 07:52:46', 'Taipei Flagship'),
(2, 'kitchen', 'Nonstick Fry Pan 28cm', 1, 1418.12, 1418.12, 1489.03, '2024-04-08 05:53:50', 'Kaohsiung Store'),
(2, 'baby_food', 'Fruit Puree Variety Pack', 3, 246.64, 739.92, 776.92, '2024-04-08 11:25:13', 'Kaohsiung Store'),
(2, 'diapers', 'Newborn Diapers Size S 80pcs', 2, 591.18, 1182.36, 1241.48, '2024-04-11 13:04:22', 'Kaohsiung Store'),
(2, 'diapers', 'Nighttime Diapers XL 60pcs', 2, 942.23, 1884.46, 1978.68, '2024-04-20 11:21:19', 'Taipei Flagship'),
(2, 'desserts', 'Mini Cheesecake Sampler', 2, 212.65, 425.30, 446.57, '2024-04-20 21:08:05', 'Taichung Branch'),
(2, 'home_care', 'Eco Laundry Detergent 2L', 2, 377.61, 755.22, 792.98, '2024-04-21 17:13:09', 'Taichung Branch'),
(2, 'baby_food', 'Toddler Nutritional Biscuits', 3, 266.00, 798.00, 837.90, '2024-04-22 05:05:49', 'Online Shop'),
(2, 'baby_food', 'Toddler Nutritional Biscuits', 2, 276.80, 553.60, 581.28, '2024-04-24 01:07:38', 'Taipei Flagship'),
(2, 'fresh_produce', 'Organic Spinach Bundle', 3, 98.75, 296.25, 311.06, '2024-04-25 09:28:36', 'Taichung Branch'),
(2, 'baby_food', 'Organic Rice Cereal Box', 2, 155.31, 310.62, 326.15, '2024-04-26 14:21:41', 'Online Shop'),
(2, 'desserts', 'Mini Cheesecake Sampler', 1, 193.36, 193.36, 203.03, '2024-04-26 20:29:16', 'Taipei Flagship'),
(2, 'personal_care', 'Hydrating Sheet Mask Set', 3, 353.13, 1059.39, 1112.36, '2024-05-01 17:21:31', 'Online Shop'),
(2, 'kitchen', 'Nonstick Fry Pan 28cm', 2, 1670.56, 3341.12, 3508.18, '2024-05-05 19:32:29', 'Kaohsiung Store'),
(2, 'toys', 'Stacking Learning Blocks', 1, 692.78, 692.78, 727.42, '2024-05-06 08:23:32', 'Online Shop'),
(2, 'toys', 'Stacking Learning Blocks', 2, 697.38, 1394.76, 1464.50, '2024-05-06 10:28:30', 'Kaohsiung Store'),
(2, 'diapers', 'Nighttime Diapers XL 60pcs', 2, 735.58, 1471.16, 1544.72, '2024-05-07 09:54:54', 'Taipei Flagship'),
(2, 'diapers', 'Nighttime Diapers XL 60pcs', 3, 866.17, 2598.51, 2728.44, '2024-05-08 22:39:44', 'Kaohsiung Store'),
(2, 'home_care', 'Air Purifying Spray', 2, 344.27, 688.54, 722.97, '2024-05-09 10:21:55', 'Taichung Branch'),
(2, 'baby_care', 'Baby Nail Care Set', 2, 554.20, 1108.40, 1163.82, '2024-05-10 00:53:11', 'Taichung Branch'),
(2, 'desserts', 'Mini Cheesecake Sampler', 2, 200.36, 400.72, 420.76, '2024-05-10 09:12:24', 'Online Shop'),
(2, 'home_care', 'Eco Laundry Detergent 2L', 2, 292.40, 584.80, 614.04, '2024-05-11 07:22:47', 'Taichung Branch'),
(2, 'baby_food', 'Organic Rice Cereal Box', 3, 337.02, 1011.06, 1061.61, '2024-05-12 23:04:54', 'Taichung Branch'),
(2, 'books', 'Toddler Activity Planner', 2, 455.16, 910.32, 955.84, '2024-05-13 04:30:03', 'Taipei Flagship'),
(2, 'kitchen', 'Stainless Steel Knife Duo', 1, 687.54, 687.54, 721.92, '2024-05-13 22:38:36', 'Taichung Branch'),
(2, 'baby_care', 'Soothing Baby Lotion', 3, 610.68, 1832.04, 1923.64, '2024-05-14 11:00:49', 'Taipei Flagship'),
(2, 'baby_care', 'Soothing Baby Lotion', 2, 539.90, 1079.80, 1133.79, '2024-05-16 03:15:01', 'Taipei Flagship'),
(2, 'baby_food', 'Toddler Nutritional Biscuits', 2, 326.01, 652.02, 684.62, '2024-05-20 17:12:14', 'Online Shop'),
(2, 'desserts', 'Mini Cheesecake Sampler', 2, 392.45, 784.90, 824.15, '2024-05-24 13:17:34', 'Kaohsiung Store'),
(2, 'family_grocery', 'Bulk Oatmeal Canister', 1, 257.98, 257.98, 270.88, '2024-05-26 19:36:04', 'Taipei Flagship'),
(2, 'home_care', 'Family Safe Floor Cleaner', 2, 261.08, 522.16, 548.27, '2024-05-27 17:01:03', 'Taichung Branch'),
(2, 'family_grocery', 'Family Pack Whole Wheat Bread', 2, 333.26, 666.52, 699.85, '2024-05-28 07:13:01', 'Kaohsiung Store'),
(2, 'personal_care', 'Vitamin C Brightening Serum', 3, 502.97, 1508.91, 1584.36, '2024-05-28 14:13:09', 'Taichung Branch'),
(2, 'home_care', 'Eco Laundry Detergent 2L', 1, 340.70, 340.70, 357.74, '2024-05-30 18:25:40', 'Taipei Flagship'),
(2, 'toys', 'Interactive Music Playmat', 1, 715.73, 715.73, 751.52, '2024-06-01 01:59:00', 'Kaohsiung Store'),
(2, 'baby_food', 'Stage 2 Dinner Jar', 2, 225.56, 451.12, 473.68, '2024-06-02 07:51:51', 'Online Shop'),
(2, 'diapers', 'Pull-Up Training Pants', 3, 585.20, 1755.60, 1843.38, '2024-06-02 21:07:08', 'Online Shop'),
(2, 'baby_care', 'Baby Nail Care Set', 2, 324.39, 648.78, 681.22, '2024-06-05 07:03:36', 'Taichung Branch'),
(2, 'diapers', 'Eco Bamboo Diaper Bundle', 2, 857.15, 1714.30, 1800.02, '2024-06-06 20:14:44', 'Taipei Flagship'),
(2, 'baby_care', 'Baby Nail Care Set', 2, 310.35, 620.70, 651.74, '2024-06-07 11:36:03', 'Taichung Branch'),
(2, 'baby_food', 'Toddler Nutritional Biscuits', 2, 223.04, 446.08, 468.38, '2024-06-07 21:12:02', 'Online Shop'),
(2, 'family_grocery', 'Bulk Oatmeal Canister', 3, 151.38, 454.14, 476.85, '2024-06-09 21:12:32', 'Kaohsiung Store'),
(2, 'baby_care', 'Baby Nail Care Set', 2, 257.72, 515.44, 541.21, '2024-06-11 18:20:19', 'Taipei Flagship'),
(2, 'books', 'Baby Sleep Tips Handbook', 1, 409.17, 409.17, 429.63, '2024-06-12 17:15:26', 'Kaohsiung Store'),
(2, 'baby_care', 'Infant Bath Essentials Kit', 2, 415.28, 830.56, 872.09, '2024-06-13 10:28:26', 'Taipei Flagship'),
(2, 'baby_care', 'Baby Nail Care Set', 3, 580.50, 1741.50, 1828.58, '2024-06-19 01:00:52', 'Taichung Branch'),
(2, 'baby_care', 'Infant Bath Essentials Kit', 3, 401.42, 1204.26, 1264.47, '2024-06-19 10:41:42', 'Taipei Flagship'),
(2, 'kitchen', 'Glass Food Storage Set', 1, 798.94, 798.94, 838.89, '2024-06-23 08:47:18', 'Kaohsiung Store'),
(2, 'desserts', 'Matcha Cream Puff Box', 2, 383.68, 767.36, 805.73, '2024-06-23 17:55:41', 'Taichung Branch'),
(2, 'diapers', 'Eco Bamboo Diaper Bundle', 4, 805.38, 3221.52, 3382.60, '2024-06-24 22:09:21', 'Taichung Branch');

-- Member 3 purchase records
INSERT INTO purchase_history (member_id, product_category, product_name, quantity, unit_price, amount, total_amount, purchase_date, store_location) VALUES
(3, 'desserts', 'Seasonal Fruit Tart', 1, 264.54, 264.54, 277.77, '2024-01-01 09:10:33', 'Online Shop'),
(3, 'coffee', 'Signature Latte Gift Set', 1, 595.33, 595.33, 625.10, '2024-01-02 04:46:03', 'Taichung Branch'),
(3, 'beverages', 'Sparkling Fruit Tea', 2, 414.94, 829.88, 871.37, '2024-01-02 11:13:32', 'Taipei Flagship'),
(3, 'snacks', 'Yogurt Granola Bites', 2, 260.31, 520.62, 546.65, '2024-01-05 05:18:36', 'Kaohsiung Store'),
(3, 'coffee', 'Espresso Capsule Variety Box', 1, 357.76, 357.76, 375.65, '2024-01-06 16:51:06', 'Taipei Flagship'),
(3, 'coffee', 'Pour Over Starter Kit', 1, 350.11, 350.11, 367.62, '2024-01-07 03:35:56', 'Taichung Branch'),
(3, 'snacks', 'Mixed Nuts Snack Pack', 1, 177.40, 177.40, 186.27, '2024-01-09 00:54:35', 'Kaohsiung Store'),
(3, 'frozen', 'Matcha Ice Cream Pint', 3, 335.65, 1006.95, 1057.30, '2024-01-10 10:23:20', 'Kaohsiung Store'),
(3, 'frozen', 'Mini Mochi Ice Cream Medley', 2, 284.69, 569.38, 597.85, '2024-01-11 02:38:29', 'Kaohsiung Store'),
(3, 'snacks', 'Dark Chocolate Biscotti', 3, 303.06, 909.18, 954.64, '2024-01-11 17:58:35', 'Online Shop'),
(3, 'beverages', 'Protein Oat Smoothie', 1, 164.05, 164.05, 172.25, '2024-01-12 16:45:32', 'Taipei Flagship'),
(3, 'beverages', 'Protein Oat Smoothie', 1, 397.58, 397.58, 417.46, '2024-01-14 19:30:15', 'Online Shop'),
(3, 'bakery', 'Chocolate Chip Muffin Box', 2, 536.17, 1072.34, 1125.96, '2024-01-16 00:57:44', 'Taipei Flagship'),
(3, 'tea', 'Rose Lychee Fruit Tea', 2, 392.98, 785.96, 825.26, '2024-01-16 15:30:27', 'Taipei Flagship'),
(3, 'breakfast', 'Granola Yogurt Bundle', 1, 184.97, 184.97, 194.22, '2024-01-18 14:57:59', 'Kaohsiung Store'),
(3, 'desserts', 'Classic Creme Brulee Cups', 2, 221.26, 442.52, 464.65, '2024-01-19 08:43:43', 'Taipei Flagship'),
(3, 'desserts', 'Classic Creme Brulee Cups', 3, 203.81, 611.43, 642.00, '2024-01-19 18:27:03', 'Kaohsiung Store'),
(3, 'grocery', 'Brown Rice Family Pack', 1, 470.58, 470.58, 494.11, '2024-01-19 22:15:25', 'Online Shop'),
(3, 'desserts', 'Caramel Pudding Twin Pack', 2, 233.34, 466.68, 490.01, '2024-01-22 12:30:54', 'Taipei Flagship'),
(3, 'breakfast', 'Buttermilk Pancake Kit', 2, 318.68, 637.36, 669.23, '2024-01-24 06:03:47', 'Taipei Flagship'),
(3, 'breakfast', 'Granola Yogurt Bundle', 2, 323.58, 647.16, 679.52, '2024-01-25 06:59:52', 'Taipei Flagship'),
(3, 'desserts', 'Seasonal Fruit Tart', 3, 183.17, 549.51, 576.99, '2024-01-27 21:45:14', 'Kaohsiung Store'),
(3, 'snacks', 'Dark Chocolate Biscotti', 3, 317.73, 953.19, 1000.85, '2024-01-28 19:48:41', 'Taipei Flagship'),
(3, 'snacks', 'Sea Salt Popcorn Tub', 1, 296.37, 296.37, 311.19, '2024-01-30 10:20:27', 'Kaohsiung Store'),
(3, 'coffee', 'Signature Latte Gift Set', 1, 371.16, 371.16, 389.72, '2024-02-09 11:57:54', 'Taichung Branch'),
(3, 'grocery', 'Organic Almond Butter Jar', 3, 357.40, 1072.20, 1125.81, '2024-02-09 15:30:53', 'Taichung Branch'),
(3, 'frozen', 'Frozen Yogurt Berry Cup', 1, 169.18, 169.18, 177.64, '2024-02-14 10:41:27', 'Kaohsiung Store'),
(3, 'bakery', 'Butter Croissant 6 Pack', 2, 365.62, 731.24, 767.80, '2024-02-14 12:46:27', 'Taipei Flagship'),
(3, 'breakfast', 'Gourmet Jam Trio', 1, 316.51, 316.51, 332.34, '2024-02-14 13:07:15', 'Kaohsiung Store'),
(3, 'frozen', 'Matcha Ice Cream Pint', 1, 339.84, 339.84, 356.83, '2024-02-15 21:10:05', 'Taipei Flagship'),
(3, 'bakery', 'Mini Brioche Slider Pack', 1, 289.81, 289.81, 304.30, '2024-02-19 03:03:00', 'Kaohsiung Store'),
(3, 'frozen', 'Matcha Ice Cream Pint', 2, 246.15, 492.30, 516.92, '2024-02-22 03:12:00', 'Taichung Branch'),
(3, 'snacks', 'Sea Salt Popcorn Tub', 1, 285.42, 285.42, 299.69, '2024-02-28 06:49:24', 'Online Shop'),
(3, 'beverages', 'Protein Oat Smoothie', 2, 260.04, 520.08, 546.08, '2024-02-29 06:17:50', 'Kaohsiung Store'),
(3, 'tea', 'Oolong Dessert Pairing Set', 1, 290.08, 290.08, 304.58, '2024-02-29 13:25:44', 'Taichung Branch'),
(3, 'bakery', 'Butter Croissant 6 Pack', 3, 189.49, 568.47, 596.89, '2024-03-14 07:26:06', 'Kaohsiung Store'),
(3, 'breakfast', 'Granola Yogurt Bundle', 3, 240.80, 722.40, 758.52, '2024-03-15 09:04:18', 'Online Shop'),
(3, 'bakery', 'Sourdough Bread Loaf', 2, 276.47, 552.94, 580.59, '2024-03-15 12:44:33', 'Online Shop'),
(3, 'snacks', 'Yogurt Granola Bites', 2, 120.65, 241.30, 253.37, '2024-03-15 23:14:04', 'Taipei Flagship'),
(3, 'tea', 'Matcha Latte Powder', 1, 334.48, 334.48, 351.20, '2024-03-21 04:10:53', 'Taichung Branch'),
(3, 'tea', 'Rose Lychee Fruit Tea', 2, 494.13, 988.26, 1037.67, '2024-03-23 17:47:06', 'Online Shop'),
(3, 'tea', 'Oolong Dessert Pairing Set', 1, 340.49, 340.49, 357.51, '2024-03-24 10:16:33', 'Taichung Branch'),
(3, 'breakfast', 'Buttermilk Pancake Kit', 2, 313.83, 627.66, 659.04, '2024-03-25 01:50:46', 'Kaohsiung Store'),
(3, 'desserts', 'Molten Chocolate Cake Duo', 2, 248.95, 497.90, 522.80, '2024-03-28 15:51:02', 'Online Shop'),
(3, 'bakery', 'Butter Croissant 6 Pack', 2, 341.64, 683.28, 717.44, '2024-03-30 14:56:32', 'Online Shop'),
(3, 'bakery', 'Mini Brioche Slider Pack', 2, 360.05, 720.10, 756.11, '2024-04-02 16:41:19', 'Kaohsiung Store'),
(3, 'breakfast', 'Gourmet Jam Trio', 2, 190.89, 381.78, 400.87, '2024-04-02 21:04:57', 'Taichung Branch'),
(3, 'frozen', 'French Macaron Frozen Pack', 3, 151.69, 455.07, 477.82, '2024-04-03 19:17:22', 'Online Shop'),
(3, 'grocery', 'Premium Olive Oil 500ml', 3, 248.91, 746.73, 784.07, '2024-04-04 19:07:16', 'Taipei Flagship'),
(3, 'breakfast', 'Buttermilk Pancake Kit', 1, 208.20, 208.20, 218.61, '2024-04-07 14:51:16', 'Taipei Flagship'),
(3, 'frozen', 'Mini Mochi Ice Cream Medley', 3, 153.87, 461.61, 484.69, '2024-04-11 04:27:18', 'Taipei Flagship'),
(3, 'desserts', 'Caramel Pudding Twin Pack', 2, 322.87, 645.74, 678.03, '2024-04-11 07:33:10', 'Online Shop'),
(3, 'personal_care', 'Sunscreen SPF50+', 1, 389.65, 389.65, 409.13, '2024-04-11 10:49:10', 'Online Shop'),
(3, 'snacks', 'Mixed Nuts Snack Pack', 3, 155.78, 467.34, 490.71, '2024-04-20 13:12:27', 'Taichung Branch'),
(3, 'beverages', 'Protein Oat Smoothie', 1, 303.57, 303.57, 318.75, '2024-04-21 19:05:13', 'Taipei Flagship'),
(3, 'tea', 'Rose Lychee Fruit Tea', 1, 485.95, 485.95, 510.25, '2024-04-22 02:51:54', 'Taipei Flagship'),
(3, 'desserts', 'Classic Creme Brulee Cups', 3, 326.81, 980.43, 1029.45, '2024-04-22 18:20:05', 'Kaohsiung Store'),
(3, 'desserts', 'Molten Chocolate Cake Duo', 2, 379.60, 759.20, 797.16, '2024-04-24 07:56:24', 'Kaohsiung Store'),
(3, 'bakery', 'Cheese Danish Selection', 2, 466.85, 933.70, 980.39, '2024-04-24 08:37:51', 'Kaohsiung Store'),
(3, 'breakfast', 'Belgian Waffle Mix', 3, 182.91, 548.73, 576.17, '2024-04-24 16:50:02', 'Taichung Branch'),
(3, 'bakery', 'Butter Croissant 6 Pack', 2, 240.47, 480.94, 504.99, '2024-04-25 00:50:28', 'Kaohsiung Store'),
(3, 'snacks', 'Yogurt Granola Bites', 1, 293.82, 293.82, 308.51, '2024-04-25 08:07:31', 'Online Shop'),
(3, 'beverages', 'Vanilla Almond Milk Latte', 3, 383.98, 1151.94, 1209.54, '2024-04-26 14:51:09', 'Online Shop'),
(3, 'desserts', 'Classic Creme Brulee Cups', 3, 375.10, 1125.30, 1181.57, '2024-04-26 15:38:41', 'Online Shop'),
(3, 'coffee', 'Reusable Coffee Cup Kit', 1, 372.57, 372.57, 391.20, '2024-04-28 14:32:32', 'Kaohsiung Store'),
(3, 'bakery', 'Butter Croissant 6 Pack', 2, 287.53, 575.06, 603.81, '2024-04-30 00:39:42', 'Taichung Branch'),
(3, 'frozen', 'Matcha Ice Cream Pint', 3, 199.22, 597.66, 627.54, '2024-05-01 01:27:45', 'Taipei Flagship'),
(3, 'personal_care', 'Aromatic Hand Cream Set', 2, 407.92, 815.84, 856.63, '2024-05-02 16:01:50', 'Taichung Branch'),
(3, 'tea', 'Earl Grey Cream Tea Bags', 1, 315.33, 315.33, 331.10, '2024-05-04 09:41:36', 'Taipei Flagship'),
(3, 'tea', 'Earl Grey Cream Tea Bags', 2, 450.40, 900.80, 945.84, '2024-05-04 23:30:00', 'Kaohsiung Store'),
(3, 'bakery', 'Mini Brioche Slider Pack', 2, 286.10, 572.20, 600.81, '2024-05-05 22:15:06', 'Online Shop'),
(3, 'desserts', 'Classic Creme Brulee Cups', 2, 247.75, 495.50, 520.28, '2024-05-09 20:05:41', 'Online Shop'),
(3, 'beverages', 'Cold Brew Coffee Bottle', 1, 199.68, 199.68, 209.66, '2024-05-12 18:19:28', 'Kaohsiung Store'),
(3, 'bakery', 'Chocolate Chip Muffin Box', 3, 453.63, 1360.89, 1428.93, '2024-05-14 09:10:17', 'Online Shop'),
(3, 'bakery', 'Sourdough Bread Loaf', 2, 403.35, 806.70, 847.04, '2024-05-15 12:49:10', 'Kaohsiung Store'),
(3, 'desserts', 'Classic Creme Brulee Cups', 2, 254.84, 509.68, 535.16, '2024-05-19 11:44:50', 'Taichung Branch'),
(3, 'snacks', 'Dark Chocolate Biscotti', 2, 136.21, 272.42, 286.04, '2024-05-20 15:39:47', 'Kaohsiung Store'),
(3, 'bakery', 'Sourdough Bread Loaf', 1, 400.88, 400.88, 420.92, '2024-05-21 14:05:51', 'Taichung Branch'),
(3, 'tea', 'Earl Grey Cream Tea Bags', 2, 327.05, 654.10, 686.81, '2024-05-22 23:36:26', 'Taipei Flagship'),
(3, 'beverages', 'Vanilla Almond Milk Latte', 1, 223.49, 223.49, 234.66, '2024-05-24 20:23:39', 'Taipei Flagship'),
(3, 'bakery', 'Chocolate Chip Muffin Box', 1, 491.83, 491.83, 516.42, '2024-05-25 06:03:18', 'Taichung Branch'),
(3, 'bakery', 'Chocolate Chip Muffin Box', 2, 311.58, 623.16, 654.32, '2024-05-25 15:31:10', 'Taipei Flagship'),
(3, 'desserts', 'Artisan Tiramisu Slice', 2, 406.99, 813.98, 854.68, '2024-05-27 11:50:49', 'Taichung Branch'),
(3, 'beverages', 'Protein Oat Smoothie', 3, 319.08, 957.24, 1005.10, '2024-05-27 20:38:43', 'Online Shop'),
(3, 'snacks', 'Yogurt Granola Bites', 2, 196.96, 393.92, 413.62, '2024-05-29 09:14:28', 'Taichung Branch'),
(3, 'grocery', 'Organic Almond Butter Jar', 2, 422.20, 844.40, 886.62, '2024-06-05 01:04:55', 'Taipei Flagship'),
(3, 'bakery', 'Butter Croissant 6 Pack', 2, 473.57, 947.14, 994.50, '2024-06-06 14:38:38', 'Online Shop'),
(3, 'frozen', 'Frozen Yogurt Berry Cup', 2, 272.20, 544.40, 571.62, '2024-06-07 03:44:10', 'Online Shop'),
(3, 'coffee', 'Reusable Coffee Cup Kit', 1, 545.12, 545.12, 572.38, '2024-06-09 08:06:37', 'Kaohsiung Store'),
(3, 'beverages', 'Protein Oat Smoothie', 1, 146.26, 146.26, 153.57, '2024-06-14 00:39:10', 'Kaohsiung Store'),
(3, 'snacks', 'Dark Chocolate Biscotti', 3, 236.21, 708.63, 744.06, '2024-06-16 01:14:07', 'Online Shop'),
(3, 'frozen', 'Frozen Yogurt Berry Cup', 3, 260.01, 780.03, 819.03, '2024-06-17 06:42:37', 'Online Shop'),
(3, 'gift', 'Sweet Treat Gift Tin', 1, 960.08, 960.08, 1008.08, '2024-06-17 15:59:10', 'Taipei Flagship'),
(3, 'beverages', 'Protein Oat Smoothie', 3, 281.43, 844.29, 886.50, '2024-06-17 18:09:03', 'Taichung Branch'),
(3, 'tea', 'Rose Lychee Fruit Tea', 2, 498.83, 997.66, 1047.54, '2024-06-20 20:30:28', 'Online Shop'),
(3, 'bakery', 'Chocolate Chip Muffin Box', 1, 320.76, 320.76, 336.80, '2024-06-21 11:04:21', 'Taipei Flagship'),
(3, 'desserts', 'Molten Chocolate Cake Duo', 3, 238.67, 716.01, 751.81, '2024-06-22 23:06:20', 'Online Shop'),
(3, 'coffee', 'Signature Latte Gift Set', 1, 559.60, 559.60, 587.58, '2024-06-24 19:30:56', 'Taipei Flagship'),
(3, 'bakery', 'Cheese Danish Selection', 3, 381.59, 1144.77, 1202.01, '2024-06-25 03:37:56', 'Kaohsiung Store'),
(3, 'grocery', 'Organic Almond Butter Jar', 2, 515.55, 1031.10, 1082.66, '2024-06-27 03:30:55', 'Kaohsiung Store');

-- 建立檢視表：會員消費統計
CREATE OR REPLACE VIEW member_purchase_summary AS
SELECT 
    m.member_id,
    m.name,
    m.gender,
    m.age_group,
    COUNT(ph.purchase_id) as total_purchases,
    SUM(COALESCE(ph.total_amount, ph.amount)) as total_spent,
    AVG(ph.amount) as avg_purchase,
    MAX(ph.purchase_date) as last_purchase_date,
    GROUP_CONCAT(DISTINCT ph.product_category) as preferred_categories
FROM members m
LEFT JOIN purchase_history ph ON m.member_id = ph.member_id
WHERE m.is_active = TRUE
GROUP BY m.member_id;

-- 建立檢視表：廣告效果統計
CREATE OR REPLACE VIEW ad_performance AS
SELECT 
    a.ad_id,
    a.title,
    a.target_category,
    a.target_gender,
    a.target_age_group,
    COUNT(adl.log_id) as display_count,
    COUNT(DISTINCT adl.member_id) as unique_viewers,
    AVG(adl.display_duration) as avg_display_duration,
    DATE(adl.display_time) as display_date
FROM advertisements a
LEFT JOIN ad_display_log adl ON a.ad_id = adl.ad_id
WHERE a.is_active = TRUE
GROUP BY a.ad_id, DATE(adl.display_time);

COMMIT;
